<app-toolbar title="Projects">
	<app-toolbar-icon-button right-side hint="Add" (click)="createProject()">
		add
	</app-toolbar-icon-button>
	<app-toolbar-icon-button right-side hint="Refresh" (click)="loadProjects()">
		refresh
	</app-toolbar-icon-button>
</app-toolbar>

<div class="project-explorer">
	<app-project-element *ngFor="let project of (projects$ | async) || []"
						 [bold]="true"
						 [expandable]="true"
						 [name]="project.name + ' [' + (project.chainId | networkName | async) + ']'">
		<div innerElements>
			<app-project-element [expandable]="true" name="Smart contracts">
				<ng-container actions>
					<button class="material-icons action-button" (click)="uploadScAbi(project.id)">add</button>
				</ng-container>
				<ng-container innerElements>
					<app-project-element
						(click)="openProjectComponent(project.id, sc.name || sc.abi.name, 'sc', sc.id)"
						*ngFor="let sc of project.smartContracts"
						type="sc"
						[name]="sc.name || sc.abi.name">
						<ng-container actions>
							<app-dropdown-menu horizontal="left">
								<app-dropdown-menu-item icon="drive_file_rename_outline" text="Rename"></app-dropdown-menu-item>
								<app-dropdown-menu-item icon="delete" text="Delete"></app-dropdown-menu-item>
							</app-dropdown-menu>
						</ng-container>
					</app-project-element>
				</ng-container>
			</app-project-element>
			<app-project-element [expandable]="true" type="group" name="Tokens">
				<ng-container actions>
					<button class="material-icons action-button" (click)="addToken(project.id)">add</button>
				</ng-container>
				<ng-container innerElements>
					<app-project-element *ngFor="let tokenAddress of project.tokens"
										 (click)="openProjectComponent(project.id, tokenAddress, 'token', tokenAddress)"
										 type="token"
										 [name]="tokenAddress">
						<ng-container actions>
							<app-dropdown-menu horizontal="left">
								<app-dropdown-menu-item icon="search" text="Explore"></app-dropdown-menu-item>
								<app-dropdown-menu-item icon="delete" text="Delete"></app-dropdown-menu-item>
							</app-dropdown-menu>
						</ng-container>
					</app-project-element>
				</ng-container>
			</app-project-element>
			<app-project-element [expandable]="true" type="group" name="NFTs (coming soon)">
				<ng-container actions>
					<button class="material-icons action-button">add</button>
				</ng-container>
			</app-project-element>

			<app-project-element [expandable]="true" type="group" name="Wallets">
				<ng-container actions>
					<button class="material-icons action-button" (click)="generateWallet(project.id)">add</button>
				</ng-container>
				<ng-container innerElements>
					<app-project-element *ngFor="let wallet of project.wallets"
										 (click)="openProjectComponent(project.id, wallet.name, 'wallet', wallet.address)"
										 type="wallet"
										 [name]="wallet.name">
						<ng-container actions>
							<app-dropdown-menu horizontal="left">
								<app-dropdown-menu-item icon="drive_file_rename_outline" text="Rename" ></app-dropdown-menu-item>
								<app-dropdown-menu-item icon="key" text="Export keys" ></app-dropdown-menu-item>
								<app-dropdown-menu-item icon="delete" text="Delete"></app-dropdown-menu-item>
							</app-dropdown-menu>
						</ng-container>
					</app-project-element>
				</ng-container>
			</app-project-element>
		</div>
	</app-project-element>
</div>
